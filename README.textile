h1. ACN PLM Authentication plugin

This plugin adds customized Shibboleth authentication support for "Redmine":http://www.redmine.org 2.4.4. Based on "Redmine Omniauth SAML":https://github.com/chrodriguez/redmine_omniauth_saml plugin of "Christian A. Rodriguez":https://github.com/chrodriguez.

h2. Database

Add one more column @enterpriseid@ - @VARCHAR@ - @127@ - @Null@ into table @users@

h2. Shibboleth

Add these line into file @/etc/httpd/conf.d/shibd.conf@ (RHEL or CentOS)
<pre>
    @<Location /redmine>@
        @AuthType shibboleth@
        @ShibCompatWith24 On@   
        @ShibRequestSetting requireSession 1@   
        @require valid-user@
    @</Location>@
</pre>

More information about Shibboleth, you can find at "Shibboleth Service Provider":https://wiki.shibboleth.net/confluence/display/SHIB2/Home

h2. Install

You can first take a look at general instructions for plugins "here":http://www.redmine.org/wiki/redmine/Plugins.

Note that the plugin is now *only compatible with Redmine 2.4.4 or higher*. 

Then :
* clone this repository in your plugins/ directory ; if you have a doubt you put it at the good level, you can go to your redmine root directoryand check you have a @plugins/acnplm_auth_shib/init.rb@ file
* install the dependencies with bundler : 
    @bundle install@
* copy assets by running this command from your redmine root directory (note: the plugin has no migration for now) : @rake redmine:plugins:migrate RAILS_ENV=production@
* restart your Redmine instance (depends on how you host it)
    @touch tmp/restart.txt@

After that you *must* configure your SAML settings in
* @plugins/acnplm_auth_shib/lib/acnplm_auth_shib/user_patch.rb@
* @plugins/acnplm_auth_shib/lib/acnplm_auth_shib/account_controller_patch.rb@


Finally you need to configure some minor options for the plugin to work, in "Administration" > "Plugins" > "Configure" on the ACN PLM Authentication plugin line.

h2. Thank you

Thank you, thank you very much "Christian A. Rodriguez":https://github.com/chrodriguez. All credits are yours (errors are mine :D ).

